webpackJsonp([6],{SygM:function(s,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("vMJZ"),a={data:function(){var s=this;return{userForm:{contact:"",sex:null},sexOptions:[{value:null,label:""},{value:0,label:"男"},{value:1,label:"女"}],passwordForm:{oldPassword:"",newPassword:"",passwordConfirm:""},passwordRules:{oldPassword:[{required:!0,message:"密码不能为空"}],newPassword:[{required:!0,message:"密码不能为空"},{min:3,max:15,message:"长度在3到15个字符"},{validator:function(e,r,o){r===s.passwordForm.oldPassword&&o(new Error("和旧密码相同")),o()},trigger:"change"}],passwordConfirm:[{required:!0,message:"请确认密码"},{validator:function(e,r,o){r!==s.passwordForm.newPassword&&o(new Error("密码输入不一致")),o()},trigger:"change"}]}}},computed:{user:function(){return this.$store.getters.user}},mounted:function(){this.user&&(this.userForm.contact=this.user.contact,this.userForm.sex=this.user.sex)},methods:{handleUpdateUser:function(){var s=this,e={sex:this.userForm.sex,contact:this.userForm.contact};Object(o.e)(e).then(function(r){if(!0===r){var o=s.user;o.sex=e.sex,o.contact=e.contact,s.$store.commit("setUser",o),s.$message({showClose:!0,message:"修改成功",type:"success"})}})},handleUpdatePassword:function(){var s=this;this.$refs.passwordForm.validate(function(e){if(e){var r={oldPassword:s.passwordForm.oldPassword,password:s.passwordForm.newPassword};Object(o.d)(r).then(function(e){!0===e?s.$message({showClose:!0,message:"密码修改成功",type:"success"}):s.$message({showClose:!0,message:"密码错误",type:"error"})})}})}}},t={render:function(){var s=this,e=s.$createElement,r=s._self._c||e;return r("div",[r("div",[r("el-form",{attrs:{"label-position":"left","label-width":"100px","status-icon":""}},[r("el-form-item",{attrs:{label:"联系方式"}},[r("el-input",{attrs:{placeholder:"QQ/微信/手机"},model:{value:s.userForm.contact,callback:function(e){s.$set(s.userForm,"contact",e)},expression:"userForm.contact"}})],1),s._v(" "),r("el-form-item",{attrs:{label:"性别"}},[r("el-select",{attrs:{placeholder:"请选择性别"},model:{value:s.userForm.sex,callback:function(e){s.$set(s.userForm,"sex",e)},expression:"userForm.sex"}},s._l(s.sexOptions,function(s){return r("el-option",{key:s.value,attrs:{label:s.label,value:s.value}})}),1)],1),s._v(" "),r("el-button",{attrs:{type:"primary",plain:""},on:{click:s.handleUpdateUser}},[s._v("修改信息")])],1),s._v(" "),r("el-divider",[r("span",{staticStyle:{color:"red"}},[s._v("危险区域")])]),s._v(" "),r("el-form",{ref:"passwordForm",attrs:{rules:s.passwordRules,"label-position":"left",model:s.passwordForm,"label-width":"100px","status-icon":""}},[r("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入旧密码"},model:{value:s.passwordForm.oldPassword,callback:function(e){s.$set(s.passwordForm,"oldPassword",e)},expression:"passwordForm.oldPassword"}})],1),s._v(" "),r("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:s.passwordForm.newPassword,callback:function(e){s.$set(s.passwordForm,"newPassword",e)},expression:"passwordForm.newPassword"}})],1),s._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"passwordConfirm"}},[r("el-input",{attrs:{type:"password",placeholder:"请确认新密码"},model:{value:s.passwordForm.passwordConfirm,callback:function(e){s.$set(s.passwordForm,"passwordConfirm",e)},expression:"passwordForm.passwordConfirm"}})],1),s._v(" "),r("el-button",{attrs:{type:"danger",plain:""},on:{click:s.handleUpdatePassword}},[s._v("修改密码")])],1)],1)])},staticRenderFns:[]},l=r("VU/8")(a,t,!1,null,null,null);e.default=l.exports}});